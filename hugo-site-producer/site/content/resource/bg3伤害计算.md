---
title: "bg3伤害计算"
date: 2025-11-11T10:50:08+08:00
draft: false
tags: ["resource"]
toc: true
showTableOfContents: true
---

# 基础
## 攻击骰
### 非重击命中伤害期望
伤害公式 = 伤害骰数量n * 伤害骰面数d + 伤害加值Bonus_damage(Bd)
伤害期望D<sub>p</sub> = n * (1+d)/2 + Bd
### 攻击骰1d20计算优劣势
1. 掷20-(重击减值)：必定命中且重击
1. 掷1：严重失误，必定未命中
1. 掷2\~(20-重击减值-1)：假设攻击骰掷x(2 <= x <= 20-重击减值-1)
命中条件：x + 攻击加值 >= 敌方护甲AC

#### D20掷骰结果为k的概率P<sub>k</sub>
k∈[1,20]
1. 均势: P<sub>k</sub> = 1/20
1. 优势: P<sub>(max=k)</sub> = (2k-1)/400
1. 劣势: P<sub>(min=k)</sub> = (41-2k)/400

重击命中率P<sub>h</sub> = ∑<sub>k=20-重击减值</sub><sup>20</sup>P<sub>k</sub>
大失败率P<sub>f</sub> = P<sub>k=1</sub>
非重击命中率P<sub>n</sub> = ∑<sub>k=(Ac-Bonus)</sub><sup>20-重击减值-1</sup>P<sub>k</sub>
显示命中率P<sub>show</sub> = ∑<sub>k=B=(Ac-Bonus)</sub><sup>20</sup>P<sub>k</sub>

##### D20优劣势骰概率表
| 值 \( k \) | 优势概率（分数） | 优势概率（小数） | 劣势概率（分数） | 劣势概率（小数） |
|------------|---------------|---------------|---------------|---------------|
| 1          | 1/400         | 0.0025        | 39/400        | 0.0975        |
| 2          | 3/400         | 0.0075        | 37/400        | 0.0925        |
| 3          | 5/400         | 0.0125        | 35/400        | 0.0875        |
| 4          | 7/400         | 0.0175        | 33/400        | 0.0825        |
| 5          | 9/400         | 0.0225        | 31/400        | 0.0775        |
| 6          | 11/400        | 0.0275        | 29/400        | 0.0725        |
| 7          | 13/400        | 0.0325        | 27/400        | 0.0675        |
| 8          | 15/400        | 0.0375        | 25/400        | 0.0625        |
| 9          | 17/400        | 0.0425        | 23/400        | 0.0575        |
| 10         | 19/400        | 0.0475        | 21/400        | 0.0525        |
| 11         | 21/400        | 0.0525        | 19/400        | 0.0475        |
| 12         | 23/400        | 0.0575        | 17/400        | 0.0425        |
| 13         | 25/400        | 0.0625        | 15/400        | 0.0375        |
| 14         | 27/400        | 0.0675        | 13/400        | 0.0325        |
| 15         | 29/400        | 0.0725        | 11/400        | 0.0275        |
| 16         | 31/400        | 0.0775        | 9/400         | 0.0225        |
| 17         | 33/400        | 0.0825        | 7/400         | 0.0175        |
| 18         | 35/400        | 0.0875        | 5/400         | 0.0125        |
| 19         | 37/400        | 0.0925        | 3/400         | 0.0075        |
| 20         | 39/400        | 0.0975        | 1/400         | 0.0025        |

#### 攻击加值
1. 攻击属性调整值：
    1. 近战非灵巧武器 & 灵巧武器但是力量>敏捷：使用力调
    1. 灵巧武器且敏捷>力量 & 远程武器： 使用敏调
    1. 攻击骰法术：使用施法主属性调整值
1. 对应攻击属性熟练项加值（固定存在，总等级1\~4级+2，5\~8级+3，9\~12级+4）
1. 增益buff
1. 装备加值

### 攻击骰实际伤害期望
#### 无不可重击伤害期望
D<sub>exp</sub> = 非重击命中伤害期望D<sub>p</sub> * (重击命中率P<sub>h</sub> * 2 + 非重击命中率P<sub>n</sub>)
实际命中率 = (重击命中率 * 2 + 非重击命中率)
 = P<sub>h</sub> * 2 + P<sub>n</sub>
 = ∑<sub>k=20-重击减值</sub><sup>20</sup>P<sub>k</sub> * 2 + ∑<sub>k=(Ac-Bonus)</sub><sup>20-重击减值-1</sup>P<sub>k</sub>

四元函数形式，公式基于投骰方式（均势、优势、劣势）和参数：
- 非重击命中伤害期望 \(D_p\)
- 敌方护甲 AC
- 攻击加值 Bonus
- 重击减值 C

其中，令 \(B = AC - Bonus\)，表示命中所需的最小骰子值（调整前）。

***简化后的伤害期望公式***
公式假设 \(B\) 在 1 到 20 之间，如果 \(B < 1\)，则设 \(B = 1\)。

- 均势
{{< math type="block" >}}
D_{exp} = D_p \times \frac{2(C+1) + \max(20-C-B, 0)}{20}
{{< /math >}}
- 优势
{{< math type="block" >}}
D_{exp} = D_p \times \frac{2(1+C)(39-C) + \max(20-C-B, 0) \times (B + 18 - C)}{400}
{{< /math >}}

- 劣势
{{< math type="block" >}}
D_{exp} = D_p \times \frac{2(1+C)^2 + \max(20-C-B, 0) \times (22 - B + C)}{400}
{{< /math >}}

#### 有不可重击伤害期望
固定伤害加值一般不可重击，比如力调、敏调、巨武器大师、酸戒
D<sub>exp</sub> = 可重击的非重击伤害期望D<sub>p_normal</sub> * (P<sub>h</sub> * 2 + P<sub>n</sub>) + 不可重击伤害期望D<sub>p_special</sub> * (P<sub>h</sub>  + P<sub>n</sub>)

- 均势
{{< math type="block" >}}
D_{exp} = D_{p\_normal} \times \frac{2(C+1) + \max(20-C-B, 0)}{20} + D_{p\_special} \times \frac{(C+1) + \max(20-C-B, 0)}{20}
{{< /math >}}
- 优势
{{< math type="block" >}}
D_{exp} = D_{p\_normal} \times \frac{2(1+C)(39-C) + \max(20-C-B, 0) \times (B + 18 - C)}{400} + D_{p\_special} \times \frac{(1+C)(39-C) + \max(20-C-B, 0) \times (B + 18 - C)}{400}
{{< /math >}}

- 劣势
{{< math type="block" >}}
D_{exp} = D_{p\_normal} \times \frac{2(1+C)^2 + \max(20-C-B, 0) \times (22 - B + C)}{400} + D_{p\_special} \times \frac{(1+C)^2 + \max(20-C-B, 0) \times (22 - B + C)}{400}
{{< /math >}}

## 豁免骰
### 豁免检定骰1d20计算优劣势
1. 掷20：必定豁免成功
1. 掷1：必定豁免失败
1. 掷2\~19：假设豁免检定骰掷x
    1. 豁免AC = x + 法术豁免属性 + 豁免属性熟练项加值（0-没有熟练项 或者 总等级1\~4级+2，5\~8级+3，9\~12级+4-拥有熟练项） + 装备豁免检定AC加值
    1. 豁免失败条件：豁免DC >= 豁免AC
#### 豁免DC
1. 非固定豁免DC
    豁免DC = 8 + 施法属性调整值 + 施法属性熟练项加值（固定存在，总等级1\~4级+2，5\~8级+3，9\~12级+4） + 装备法术豁免等级DC加值
1. 固定豁免DC：[捏豁免法术卷轴](/nayun.github.io/resource/bg3伤害计算/#卷轴固定豁免dc攻击加值表)

### 开卡职业豁免属性
| 开卡职业 | 力量 | 敏捷 | 体质 | 智力 | 感知 | 魅力 |
| :--- | :---: | :---: | :---: | :---: | :---: | :---: |
|战士|√| |√| | | |
|野蛮人|√| |√| | | |
|游侠|√|√|| | | |
|武僧|√|√| | | | |
|游荡者| |√| |√| | |
|吟游诗人| |√| | | |√|
|圣武士| | | | |√|√|
|邪术师| | | | |√|√|
|牧师| | | | |√|√|
|术士| | |√| | |√|
|德鲁伊| | | |√|√| |
|法师| | | |√|√| |

## 豁免骰实际伤害期望
豁免成功率 * 豁免成功伤害期望 + 豁免失败率 * 豁免失败伤害期望
### 豁免成功率
## 卷轴固定豁免DC、攻击加值表
| 法术环阶 | 豁免DC | 攻击加值 |
| :--- | :---: | :---: |
| 戏法 | 13 | +5 |
| 1环 | 13 | +5 |
| 2环 | 13 | +5 |
| 3环 | 15 | +7 |
| 4环 | 15 | +7 |
| 5环 | 17 | +9 |
| 6环 | 17 | +9 |



# 技能伤害期望
- 敌方AC=15
- 重击减值C=0
- 力调=3，等级=4（熟练项加值=2） -> 攻击加值Bonus = 5
D20掷骰结果为k的概率P<sub>k</sub>, k∈[1,20]
1. 均势: P<sub>k</sub> = 1/20
1. 优势: P<sub>(max=k)</sub> = (2k-1)/400
1. 劣势: P<sub>(min=k)</sub> = (41-2k)/400

## 巨武器大师
攻击减值 = 5
不能重击的伤害加值 = 10

实际护甲B<sub>2</sub> = B + 5
不可重击伤害期望D<sub>p_special</sub> = 3（力调）+10

### 巨武器大师增伤期望表
1d12伤害骰，3力调
列：实际护甲Ac-Bonus（未计算专长减值）
行：重击减值
| | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 13 | 14 | 15 |
|----------------|----------------------|----------------------|----------------------|----------------------|----------------------|----------------------|----------------------|----------------------|----------------------|----------------------|----------------------|
| 0 | 18.6%(7.9->9.4) | 15.1%(7.5->8.6) | 11.1%(7.0->7.8) | 6.5%(6.5->6.9) | 1.2%(6.0->6.1) | -5.0%(5.5->5.3) | -12.3%(5.1->4.5) | -21.2%(4.6->3.6) | -32.1%(4.1->2.8) | -45.9%(3.6->2.0) | -63.8%(3.2->1.1) |
| 1 | 17.9%(8.2->9.7) | 14.5%(7.8->8.9) | 10.6%(7.3->8.1) | 6.2%(6.8->7.2) | 1.2%(6.3->6.4) | -4.7%(5.9->5.6) | -11.6%(5.4->4.8) | -19.8%(4.9->4.0) | -29.8%(4.5->3.1) | -42.1%(4.0->2.3) | -34.3%(3.5->2.3) |
| 2 | 17.2%(8.6->10.1) | 13.9%(8.1->9.2) | 10.2%(7.6->8.4) | 5.9%(7.2->7.6) | 1.1%(6.7->6.8) | -4.4%(6.2->5.9) | -10.9%(5.7->5.1) | -18.6%(5.2->4.3) | -27.7%(4.8->3.5) | -19.8%(4.3->3.5) | -9.8%(3.8->3.5) |
| 3 | 16.6%(8.9->10.4) | 13.4%(8.4->9.6) | 9.7%(8.0->8.7) | 5.7%(7.5->7.9) | 1.1%(7.0->7.1) | -4.2%(6.5->6.2) | -10.3%(6.0->5.4) | -17.5%(5.6->4.6) | -9.8%(5.1->4.6) | -0.5%(4.6->4.6) | 10.8%(4.2->4.6) |
| 4 | 16.0%(9.2->10.7) | 12.9%(8.8->9.9) | 9.4%(8.3->9.1) | 5.4%(7.8->8.2) | 1.0%(7.3->7.4) | -4.0%(6.9->6.6) | -9.8%(6.4->5.8) | -2.5%(5.9->5.8) | 6.0%(5.4->5.8) | 16.2%(4.9->5.8) | 28.5%(4.5->5.8) |
| 5 | 15.4%(9.6->11.0) | 12.4%(9.1->10.2) | 9.0%(8.6->9.4) | 5.2%(8.1->8.6) | 1.0%(7.7->7.7) | -3.8%(7.2->6.9) | 3.0%(6.7->6.9) | 10.8%(6.2->6.9) | 20.0%(5.8->6.9) | 30.8%(5.3->6.9) | 43.8%(4.8->6.9) |

说明：正值表示f2 > f1（开启巨武器大师更优）

![-](../images/巨武器大师1.png)

重击减值 = 0:
  实际护甲 = 8, 关期望 = 6.50, 开期望 = 6.93, 差值 = 0.4250, 关闭技能时显示的命中率 = 0.65
  实际护甲 = 9, 关期望 = 6.03, 开期望 = 6.10, 差值 = 0.0750, 关闭技能时显示的命中率 = 0.60
  实际护甲 = 10, 关期望 = 5.55, 开期望 = 5.28, 差值 = -0.2750, 关闭技能时显示的命中率 = 0.55

重击减值 = 1:
  实际护甲 = 8, 关期望 = 6.83, 开期望 = 7.25, 差值 = 0.4250, 关闭技能时显示的命中率 = 0.65
  实际护甲 = 9, 关期望 = 6.35, 开期望 = 6.43, 差值 = 0.0750, 关闭技能时显示的命中率 = 0.60
  实际护甲 = 10, 关期望 = 5.88, 开期望 = 5.60, 差值 = -0.2750, 关闭技能时显示的命中率 = 0.55

重击减值 = 2:
  实际护甲 = 8, 关期望 = 7.15, 开期望 = 7.58, 差值 = 0.4250, 关闭技能时显示的命中率 = 0.65
  实际护甲 = 9, 关期望 = 6.67, 开期望 = 6.75, 差值 = 0.0750, 关闭技能时显示的命中率 = 0.60
  实际护甲 = 10, 关期望 = 6.20, 开期望 = 5.93, 差值 = -0.2750, 关闭技能时显示的命中率 = 0.55
  实际护甲 = 15, 关期望 = 3.83, 开期望 = 3.45, 差值 = -0.3750, 关闭技能时显示的命中率 = 0.30

重击减值 = 3:
  实际护甲 = 8, 关期望 = 7.47, 开期望 = 7.90, 差值 = 0.4250, 关闭技能时显示的命中率 = 0.65
  实际护甲 = 9, 关期望 = 7.00, 开期望 = 7.08, 差值 = 0.0750, 关闭技能时显示的命中率 = 0.60
  实际护甲 = 10, 关期望 = 6.53, 开期望 = 6.25, 差值 = -0.2750, 关闭技能时显示的命中率 = 0.55
  实际护甲 = 13, 关期望 = 5.10, 开期望 = 4.60, 差值 = -0.5000, 关闭技能时显示的命中率 = 0.40
  实际护甲 = 14, 关期望 = 4.62, 开期望 = 4.60, 差值 = -0.0250, 关闭技能时显示的命中率 = 0.35
  实际护甲 = 15, 关期望 = 4.15, 开期望 = 4.60, 差值 = 0.4500, 关闭技能时显示的命中率 = 0.30

重击减值 = 4:
  实际护甲 = 8, 关期望 = 7.80, 开期望 = 8.23, 差值 = 0.4250, 关闭技能时显示的命中率 = 0.65
  实际护甲 = 9, 关期望 = 7.32, 开期望 = 7.40, 差值 = 0.0750, 关闭技能时显示的命中率 = 0.60
  实际护甲 = 10, 关期望 = 6.85, 开期望 = 6.58, 差值 = -0.2750, 关闭技能时显示的命中率 = 0.55
  实际护甲 = 12, 关期望 = 5.90, 开期望 = 5.75, 差值 = -0.1500, 关闭技能时显示的命中率 = 0.45
  实际护甲 = 13, 关期望 = 5.43, 开期望 = 5.75, 差值 = 0.3250, 关闭技能时显示的命中率 = 0.40

重击减值 = 5:
  实际护甲 = 8, 关期望 = 8.12, 开期望 = 8.55, 差值 = 0.4250, 关闭技能时显示的命中率 = 0.65
  实际护甲 = 9, 关期望 = 7.65, 开期望 = 7.73, 差值 = 0.0750, 关闭技能时显示的命中率 = 0.60
  实际护甲 = 10, 关期望 = 7.17, 开期望 = 6.90, 差值 = -0.2750, 关闭技能时显示的命中率 = 0.55
  实际护甲 = 11, 关期望 = 6.70, 开期望 = 6.90, 差值 = 0.2000, 关闭技能时显示的命中率 = 0.50

**整体趋势**：关闭技能时显示的命中率在60%~65%时，开关巨武器大师的实际伤害期望相差不大，低于60%时，关闭巨武器大师的伤害期望高于开启伤害期望

## 凶蛮打手
### 凶蛮打手伤害骰计算
类优势命中骰
参数：骰子面数d
{{< math type="block" >}}
D_p = \frac{(d+1)(4d-1)}{6d}
{{< /math >}}
### 无增益增伤期望表
1d12伤害骰，3力调
列：实际护甲Ac-Bonus
行：重击减值
|      |           5     |            6        |         7      |          8          |       9          |      10     |           11          |      12      |          13          |      14      |          15 |
|------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|
|          0  |   21.3%<br>(7.9->9.6)  | 21.3%<br>(7.5->9.0)  | 21.4%<br>(7.0->8.5)   |21.4%<br>(6.5->7.9)  | 21.4%<br>(6.0->7.3) |  21.5%<br>(5.5->6.7)   |21.5%<br>(5.1->6.2)   |21.6%<br>(4.6->5.6)  | 21.7%<br>(4.1->5.0)  | 21.8%<br>(3.6->4.4)  | 21.9%<br>(3.2->3.9)|
|          1   |  21.7%<br>(8.2->10.0)  | 21.7%<br>(7.8->9.5)  | 21.8%<br>(7.3->8.9)  | 21.8%<br>(6.8->8.3) |  21.9%<br>(6.3->7.7)  | 22.0%<br>(5.9->7.2) |  22.1%<br>(5.4->6.6)   |22.2%<br>(4.9->6.0)  | 22.3%<br>(4.5->5.4) |  22.5%<br>(4.0->4.9) | 22.7%<br>(3.5->4.3)|
|          2|     22.0%<br>(8.6->10.5)|   22.1%<br>(8.1->9.9) |  22.1%<br>(7.6->9.3)  | 22.2%<br>(7.2->8.7)| 22.3%<br>(6.7->8.2)  | 22.4%<br>(6.2->7.6)|22.5%<br>(5.7->7.0)|22.7%<br>(5.2->6.4)|22.9%<br>(4.8->5.9)|23.1%<br>(4.3->5.3)|23.4%<br>(3.8->4.7)|
| 3|  22.3%<br>(8.9->10.9)|22.4%<br>(8.4->10.3)|22.5%<br>(8.0->9.7)|22.6%<br>(7.5->9.2)|22.7%<br>(7.0->8.6)|22.8%<br>(6.5->8.0)|23.0%<br>(6.0->7.4)|23.2%<br>(5.6->6.9)|23.4%<br>(5.1->6.3)|23.6%<br>(4.6->5.7)|23.9%<br>(4.2->5.1)|
| 4|  22.6%<br>(9.2->11.3)|22.7%<br>(8.8->10.7)|22.8%<br>(8.3->10.2)|22.9%<br>(7.8->9.6)|23.0%<br>(7.3->9.0)|23.2%<br>(6.9->8.4)|23.4%<br>(6.4->7.9)|23.6%<br>(5.9->7.3)|23.8%<br>(5.4->6.7)|24.1%<br>(4.9->6.1)|24.4%<br>(4.5->5.6)|
| 5|  22.9%<br>(9.6->11.7)|23.0%<br>(9.1->11.2)|23.1%<br>(8.6->10.6)|23.2%<br>(8.1->10.0)|23.4%<br>(7.7->9.4)|23.5%<br>(7.2->8.9)|23.7%<br>(6.7->8.3)|23.9%<br>(6.2->7.7)|24.2%<br>(5.8->7.1)|24.5%<br>(5.3->6.6)|24.8%<br>(4.8->6.0)|

说明：正值表示f2 > f1（开启凶蛮打手更优）
![-](../images/凶蛮打手1.png)

### 3增益增伤期望表
1d12伤害骰，3力调
增益：
- 卡哈项链 1d6
- 心灵通道戒指 1d4
- 巨像灵药 1d4

列：实际护甲Ac-Bonus
行：重击减值
| | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 13 | 14 | 15 |
|---|---|---|---|---|---|---|---|---|---|---|---|
| 0 | 23.6%(15.15->18.73) | 23.6%(14.25->17.62) | 23.6%(13.35->16.51) | 23.7%(12.45->15.40) | 23.7%(11.55->14.29) | 23.7%(10.65->13.17) | 23.7%(9.75->12.06) | 23.8%(8.85->10.95) | 23.8%(7.95->9.84) | 23.9%(7.05->8.73) | 23.9%(6.15->7.62) |
| 1 | 23.8%(15.90->19.69) | 23.8%(15.00->18.58) | 23.9%(14.10->17.47) | 23.9%(13.20->16.36) | 23.9%(12.30->15.25) | 24.0%(11.40->14.14) | 24.0%(10.50->13.02) | 24.1%(9.60->11.91) | 24.2%(8.70->10.80) | 24.3%(7.80->9.69) | 24.4%(6.90->8.58) |
| 2 | 24.0%(16.65->20.65) | 24.0%(15.75->19.54) | 24.1%(14.85->18.43) | 24.1%(13.95->17.32) | 24.2%(13.05->16.21) | 24.2%(12.15->15.10) | 24.3%(11.25->13.99) | 24.4%(10.35->12.87) | 24.5%(9.45->11.76) | 24.6%(8.55->10.65) | 24.8%(7.65->9.54) |
| 3 | 24.2%(17.40->21.61) | 24.2%(16.50->20.50) | 24.3%(15.60->19.39) | 24.3%(14.70->18.28) | 24.4%(13.80->17.17) | 24.5%(12.90->16.06) | 24.5%(12.00->14.95) | 24.6%(11.10->13.84) | 24.8%(10.20->12.72) | 24.9%(9.30->11.61) | 25.0%(8.40->10.50) |
| 4 | 24.3%(18.15->22.57) | 24.4%(17.25->21.46) | 24.5%(16.35->20.35) | 24.5%(15.45->19.24) | 24.6%(14.55->18.13) | 24.7%(13.65->17.02) | 24.8%(12.75->15.91) | 24.9%(11.85->14.80) | 25.0%(10.95->13.69) | 25.1%(10.05->12.57) | 25.3%(9.15->11.46) |
| 5 | 24.5%(18.90->23.53) | 24.5%(18.00->22.42) | 24.6%(17.10->21.31) | 24.7%(16.20->20.20) | 24.8%(15.30->19.09) | 24.8%(14.40->17.98) | 24.9%(13.50->16.87) | 25.0%(12.60->15.76) | 25.2%(11.70->14.65) | 25.3%(10.80->13.54) | 25.5%(9.90->12.42) |
![-](../images/凶蛮打手2.png)
