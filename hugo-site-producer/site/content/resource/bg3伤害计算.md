---
title: "bg3伤害计算"
date: 2025-11-11T10:50:08+08:00
draft: false
tags: ["resource"]
toc: true
showTableOfContents: true
---

# 基础
## 命中率
### 攻击骰1d20计算优劣势
1. 掷20-(重击减值)：必定命中且重击
1. 掷1：严重失误，必定未命中
1. 掷2\~(20-重击减值)：假设攻击骰掷x(2 <= x <= 20-重击减值-1)
命中条件：x + 攻击加值 >= 敌方护甲AC
#### 攻击加值
1. 攻击属性调整值：
    1. 近战：
        1. 非灵巧武器 & 灵巧武器但是力量>敏捷
            1. 使用力调
        2. 灵巧武器且敏捷>力量
            1. 使用敏调
    2. 远程：
        1. 使用敏调
    3. 攻击骰法术：
        1. 使用施法主属性调整值
1. 对应攻击属性熟练项加值（固定存在，总等级1\~4级+2，5\~8级+3，9\~12级+4）
1. 增益buff:
    1. 祝福术1d4
    1. 高地
1. 装备加值
### 豁免骰
#### 豁免检定骰1d20计算优劣势
1. 掷20：必定豁免成功
1. 掷1：必定豁免失败
1. 掷2\~19：假设豁免检定骰掷x
    1. 豁免AC = x + 法术豁免属性 + 豁免属性熟练项加值（0-没有熟练项 或者 总等级1\~4级+2，5\~8级+3，9\~12级+4-拥有熟练项） + 装备豁免检定AC加值
    1. 命中条件：豁免DC >= 豁免AC
#### 豁免DC
1. 非固定豁免DC
    豁免DC = 8 + 施法属性调整值 + 施法属性熟练项加值（固定存在，总等级1\~4级+2，5\~8级+3，9\~12级+4） + 装备法术豁免等级DC加值
1. 固定豁免DC：[捏豁免法术卷轴](/nayun.github.io/resource/bg3伤害计算/#卷轴豁免dc攻击加值)

#### 开卡职业豁免属性（属性豁免带熟练项加值）
| 开卡职业 | 力量 | 敏捷 | 体质 | 智力 | 感知 | 魅力 |
| :--- | :---: | :---: | :---: | :---: | :---: | :---: |
|战士|√| |√| | | |
|野蛮人|√| |√| | | |
|游侠|√|√|| | | |
|武僧|√|√| | | | |
|游荡者| |√| |√| | |
|吟游诗人| |√| | | |√|
|圣武士| | | | |√|√|
|邪术师| | | | |√|√|
|牧师| | | | |√|√|
|术士| | |√| | |√|
|德鲁伊| | | |√|√| |
|法师| | | |√|√| |
### 卷轴豁免DC/攻击加值
| 法术环阶 | 豁免DC | 攻击加值 |
| :--- | :---: | :---: |
| 戏法 | 13 | +5 |
| 1环 | 13 | +5 |
| 2环 | 13 | +5 |
| 3环 | 15 | +7 |
| 4环 | 15 | +7 |
| 5环 | 17 | +9 |
| 6环 | 17 | +9 |


# 豁免骰实际伤害期望
豁免成功率 * 豁免成功伤害期望 + 豁免失败率 * 豁免失败伤害期望
## 豁免成功率


# 攻击骰实际伤害期望
实际伤害期望 = 全伤害骰期望 * (重击命中率 * 2 + 非重击命中率)
实际命中率 = (重击命中率 * 2 + 非重击命中率)
 = P<sub>h</sub> * 2 + P<sub>n</sub>
 = ∑<sub>k=20-重击减值</sub><sup>20</sup>P<sub>k</sub> * 2 + ∑<sub>k=(Ac-Bonus)</sub><sup>20-重击减值-1</sup>P<sub>k</sub>
，P<sub>k</sub> = 
1. 均势: P<sub>k</sub> = 1/20
1. 优势: P<sub>(max=k)</sub> = (2k-1)/400
1. 劣势: P<sub>(min=k)</sub> = (41-2k)/400
## 命中率
命中率 = x + 攻击加值Bonus >= 敌方护甲Ac, 整数x取[2, 20-重击减值-1]
假设Ac始终大于加值Bonus
### 攻击骰1d20计算优劣势
1. 掷20-(重击减值)：必定命中且重击
1. 掷1：严重失误，必定未命中
1. 掷2\~(20-重击减值)：假设攻击骰掷x(2 <= x <= 20-重击减值-1)
命中条件：x + 攻击加值Bonus >= 敌方护甲Ac
#### 命中率：
D20掷骰结果为k的概率P<sub>k</sub>, k∈[1,20]
1. 均势: P<sub>k</sub> = 1/20
1. 优势: P<sub>(max=k)</sub> = (2k-1)/400
1. 劣势: P<sub>(min=k)</sub> = (41-2k)/400

重击命中率P<sub>h</sub> = ∑<sub>k=20-重击减值</sub><sup>20</sup>P<sub>k</sub>
大失败率P<sub>f</sub> = P<sub>k=1</sub>
非重击命中率P<sub>n</sub> = ∑<sub>k=(Ac-Bonus)</sub><sup>20-重击减值-1</sup>P<sub>k</sub>

#### 攻击加值
1. 攻击属性调整值：
    1. 近战：
        1. 非灵巧武器 & 灵巧武器但是力量>敏捷
            1. 使用力调
        2. 灵巧武器且敏捷>力量
            1. 使用敏调
    2. 远程：
        1. 使用敏调
    3. 攻击骰法术：
        1. 使用施法主属性调整值
1. 对应攻击属性熟练项加值（固定存在，总等级1\~4级+2，5\~8级+3，9\~12级+4）
1. 增益buff:
    1. 祝福术1d4
    1. 高地
1. 装备加值
## 重击减值与实际伤害期望对应表
- 伤害骰：1d10+4，全伤害骰期望 = 5.5 + 4 = 9.5
- 攻击加值（Bonus）：+6
- 敌方AC：15
- 重击减值（C）：1到5

计算公式说明：
- **均势**：每个骰子值概率为1/20。实际命中率因子 = (13 + C) / 20。
- **优势**：取两个d20的最大值，概率P(max=k) = (2k-1)/400。重击命中率 = 1 - [(L_crit - 1)/20]²，非重击命中率 = [(L_crit - 1)/20]² - (8/20)²，其中L_crit = 20 - C。
- **劣势**：取两个d20的最小值，概率P(min=k) = (41-2k)/400。重击命中率 = [(21 - L_crit)/20]²，非重击命中率 = (12/20)² - [(21 - L_crit)/20]²。

计算结果如下表（伤害期望值保留两位小数）：

| 重击减值 | 均势伤害期望 | 优势伤害期望 | 劣势伤害期望 |
|----------|---------------|---------------|---------------|
| 1        | 6.65          | 9.79          | 3.52          |
| 2        | 7.13          | 10.62         | 3.63          |
| 3        | 7.60          | 11.40         | 3.80          |
| 4        | 8.08          | 12.14         | 4.01          |
| 5        | 8.55          | 12.83         | 4.28          |
