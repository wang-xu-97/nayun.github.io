import re

def normal_non_crit_dice_expectation(d):
    return (1+d)/2

def xmds_non_crit_dice_expectation(d):
    return (d+1)*(4*d-1)/(6*d)

nncde = normal_non_crit_dice_expectation
xncde = xmds_non_crit_dice_expectation

def text_to_markdown_table(data_text):
    """
    将文本数据转换为Markdown表格
    
    参数:
    data_text: 包含表格数据的字符串
    
    返回:
    markdown_table: Markdown格式的表格字符串
    """
    
    # 分割文本行
    lines = data_text.strip().split('\n')
    
    # 提取表头（第一行）
    header_line = lines[0]
    # 使用正则表达式分割表头，匹配连续的非空白字符
    headers = re.findall(r'\S+', header_line)
    
    # 处理数据行
    data_rows = []
    for line in lines[2:]:  # 跳过表头和分隔线
        # 使用正则表达式分割数据行
        row_data = re.findall(r'\S+', line)
        if row_data:  # 确保不是空行
            data_rows.append(row_data)
    
    # 构建Markdown表格
    markdown_lines = []
    
    # 添加表头
    header_row = "| | " + " | ".join(headers[1:]) + " |"
    markdown_lines.append(header_row)
    
    # 添加分隔线
    separator_row = "|" + "|".join(["---" for _ in headers]) + "|"
    markdown_lines.append(separator_row)
    
    # 添加数据行
    for row in data_rows:
        data_row = "| " + " | ".join(row) + " |"
        markdown_lines.append(data_row)
    
    # 返回完整的Markdown表格
    return "\n".join(markdown_lines)

if __name__ == '__main__':
    s = '''
重击减值\护甲                 5                 6                 7                 8                 9                10                11                12                13                14                15
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
          0     91.2%(7.9->15.2)   91.3%(7.5->14.2)   91.4%(7.0->13.3)   91.5%(6.5->12.4)   91.7%(6.0->11.6)   91.9%(5.5->10.7)   92.1%(5.1->9.8)   92.4%(4.6->8.8)   92.7%(4.1->8.0)   93.2%(3.6->7.0)   93.7%(3.2->6.2)
          1     92.7%(8.2->15.9)   92.9%(7.8->15.0)   93.2%(7.3->14.1)   93.4%(6.8->13.2)   93.7%(6.3->12.3)   94.0%(5.9->11.4)   94.4%(5.4->10.5)   94.9%(4.9->9.6)   95.5%(4.5->8.7)   96.2%(4.0->7.8)   97.1%(3.5->6.9)
          2     94.2%(8.6->16.6)   94.4%(8.1->15.8)   94.8%(7.6->14.8)   95.1%(7.2->13.9)   95.5%(6.7->13.1)   96.0%(6.2->12.2)   96.5%(5.7->11.2)   97.1%(5.2->10.3)   97.9%(4.8->9.4)   98.8%(4.3->8.6)  100.0%(3.8->7.7)
          3     95.5%(8.9->17.4)   95.8%(8.4->16.5)   96.2%(8.0->15.6)   96.7%(7.5->14.7)   97.1%(7.0->13.8)   97.7%(6.5->12.9)   98.3%(6.0->12.0)   99.1%(5.6->11.1)  100.0%(5.1->10.2)  101.1%(4.6->9.3)  102.4%(4.2->8.4)
          4     96.7%(9.2->18.1)   97.1%(8.8->17.2)   97.6%(8.3->16.4)   98.1%(7.8->15.4)   98.6%(7.3->14.6)   99.3%(6.9->13.7)  100.0%(6.4->12.8)  100.8%(5.9->11.8)  101.8%(5.4->10.9)  103.0%(4.9->10.1)  104.5%(4.5->9.2)
          5     97.9%(9.6->18.9)   98.3%(9.1->18.0)   98.8%(8.6->17.1)   99.4%(8.1->16.2)  100.0%(7.7->15.3)  100.7%(7.2->14.4)  101.5%(6.7->13.5)  102.4%(6.2->12.6)  103.5%(5.8->11.7)  104.7%(5.3->10.8)  106.3%(4.8->9.9)

'''
    print(text_to_markdown_table(s))