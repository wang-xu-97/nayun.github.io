---
title: "压缩解压"
date: 2025-07-30T17:51:10+08:00
draft: false
tags: ["技", "code", "python"]
toc: true
showTableOfContents: true
---

# 解压
## 基础
解压zip
模块：`zipfile`
```python
import zipfile
with zipfile.ZipFile(fp, 'r') as zip_ref:
    zip_ref.extractall()
```

## 递归解压zip
模块：`zipfile`, `pathlib`
`zipfile.ZipFile.extract(fi, ep)`方法逐个判断fi.filename是否匹配zip文件，匹配则进入递归解压
```python
import zipfile
from pathlib import Path
from os.path import join
def r_unzip(fp:Path, ep:str='./unzip') -> int:
    # 统计解压的zip文件数
    c = 1
    try:
        extr_path = join(ep, fp.stem.split('.zip')[0])
        with zipfile.ZipFile(fp, 'r') as zip_ref:
            for finfo in zip_ref.infolist():
                zip_ref.extract(finfo, extr_path)
                extr_file = Path(join(extr_path, finfo.filename))
                if extr_file.match("*.zip"):
                    c += r_unzip(extr_file, extr_path)
    except Exception as e:
        print(f'file error, pass:{fp}, error msg:{e}')
    finally:
        return c
```
