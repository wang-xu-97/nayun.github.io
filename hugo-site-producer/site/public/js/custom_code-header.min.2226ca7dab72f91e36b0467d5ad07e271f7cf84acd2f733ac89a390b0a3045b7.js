document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".copy-button").forEach(e=>{if(!e.querySelector(".copy-tooltip")){const t=document.createElement("span");t.className="copy-tooltip",t.textContent="✓ 已复制",e.appendChild(t)}e.addEventListener("click",()=>{const s=e.closest(".code-block-wrapper"),o=s.querySelector("pre code"),i=o.querySelectorAll("span.cl"),a=Array.from(i).map(e=>{const t=e.cloneNode(!0),n=t.querySelector("span.ln");return n&&n.remove(),t.textContent}).join(""),n=e.querySelector(".copy-tooltip"),r=e.innerHTML,t=document.createElement("textarea");t.value=a,document.body.appendChild(t),t.select(),e.classList.add("hide-original"),navigator.clipboard.writeText(t.value).then(()=>{n.style.opacity="1",setTimeout(()=>{n.style.opacity="0",e.classList.remove("hide-original")},2e3)}),document.body.removeChild(t)})}),document.querySelectorAll(".language-label").forEach(e=>{e.addEventListener("click",()=>{const n=e.closest(".code-block-wrapper"),t=n?.querySelector("pre.chroma");t?t.classList.toggle("collapsed"):console.error("折叠失败")})})})