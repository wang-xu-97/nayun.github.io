import re

def normal_non_crit_dice_expectation(d):
    return (1+d)/2

def xmds_non_crit_dice_expectation(d):
    return (d+1)*(4*d-1)/(6*d)

nncde = normal_non_crit_dice_expectation
xncde = xmds_non_crit_dice_expectation

def text_to_markdown_table(data_text):
    """
    将文本数据转换为Markdown表格
    
    参数:
    data_text: 包含表格数据的字符串
    
    返回:
    markdown_table: Markdown格式的表格字符串
    """
    
    # 分割文本行
    lines = data_text.strip().split('\n')
    
    # 提取表头（第一行）
    header_line = lines[0]
    # 使用正则表达式分割表头，匹配连续的非空白字符
    headers = re.findall(r'\S+', header_line)
    
    # 处理数据行
    data_rows = []
    for line in lines[2:]:  # 跳过表头和分隔线
        # 使用正则表达式分割数据行
        row_data = re.findall(r'\S+', line)
        if row_data:  # 确保不是空行
            data_rows.append(row_data)
    
    # 构建Markdown表格
    markdown_lines = []
    
    # 添加表头
    header_row = "| | " + " | ".join(headers[1:]) + " |"
    markdown_lines.append(header_row)
    
    # 添加分隔线
    separator_row = "|" + "|".join(["---" for _ in headers]) + "|"
    markdown_lines.append(separator_row)
    
    # 添加数据行
    for row in data_rows:
        data_row = "| " + " | ".join(row) + " |"
        markdown_lines.append(data_row)
    
    # 返回完整的Markdown表格
    return "\n".join(markdown_lines)

if __name__ == '__main__':
    s = '''
重击减值\护甲                 5                 6                 7                 8                 9                10                11                12                13                14                15
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
          0     39.4%(7.9->11.1)   35.2%(7.5->10.1)   30.5%(7.0->9.1)   25.0%(6.5->8.1)   18.7%(6.0->7.2)   11.3%(5.5->6.2)    2.5%(5.1->5.2)   -8.2%(4.6->4.2)  -21.2%(4.1->3.2)  -37.7%(3.6->2.3)  -59.1%(3.2->1.3)
          1     37.9%(8.2->11.4)   33.8%(7.8->10.4)   29.1%(7.3->9.4)   23.8%(6.8->8.4)   17.7%(6.3->7.5)   10.6%(5.9->6.5)    2.3%(5.4->5.5)   -7.6%(4.9->4.5)  -19.7%(4.5->3.6)  -34.6%(4.0->2.6)  -25.7%(3.5->2.6)
          2     36.4%(8.6->11.7)   32.4%(8.1->10.7)   27.9%(7.6->9.8)   22.7%(7.2->8.8)   16.9%(6.7->7.8)   10.1%(6.2->6.8)    2.2%(5.7->5.8)   -7.1%(5.2->4.9)  -18.3%(4.8->3.9)   -9.3%(4.3->3.9)    2.0%(3.8->3.9)
          3     35.1%(8.9->12.0)   31.2%(8.4->11.1)   26.7%(8.0->10.1)   21.7%(7.5->9.1)   16.1%(7.0->8.1)    9.6%(6.5->7.2)    2.1%(6.0->6.2)   -6.7%(5.6->5.2)    2.0%(5.1->5.2)   12.4%(4.6->5.2)   25.3%(4.2->5.2)
          4     33.9%(9.2->12.4)   30.0%(8.8->11.4)   25.7%(8.3->10.4)   20.8%(7.8->9.4)   15.4%(7.3->8.4)    9.1%(6.9->7.5)    2.0%(6.4->6.5)   10.2%(5.9->6.5)   19.8%(5.4->6.5)   31.3%(4.9->6.5)   45.3%(4.5->6.5)
          5     32.7%(9.6->12.7)   28.9%(9.1->11.7)   24.7%(8.6->10.7)   20.0%(8.1->9.8)   14.7%(7.7->8.8)    8.7%(7.2->7.8)   16.4%(6.7->7.8)   25.3%(6.2->7.8)   35.7%(5.8->7.8)   47.9%(5.3->7.8)   62.5%(4.8->7.8)

          
          
'''
    print(text_to_markdown_table(s))