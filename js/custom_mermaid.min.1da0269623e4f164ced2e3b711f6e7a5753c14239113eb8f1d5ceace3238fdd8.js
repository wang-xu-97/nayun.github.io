const panzoomInstances=new Map;document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".mermaid-zoom").forEach((e,t)=>{const n=new MutationObserver(s=>{const o=e.querySelector("svg");o&&(n.disconnect(),initPanzoom(e,o,t))});n.observe(e,{childList:!0,subtree:!0});const s=e.querySelector("svg");s&&initPanzoom(e,s,t)})});function initPanzoom(e,t,n){try{const s=panzoom(t,{bounds:!0,maxZoom:5,minZoom:.2,smoothScroll:!1,beforeWheel:e=>e.ctrlKey||e.metaKey});panzoomInstances.set(e.id||`mermaid-container-${n}`,{instance:s,container:e,initialScale:1}),console.log("Panzoom initialized for",e)}catch(e){console.error("Error initializing Panzoom:",e)}}window.zoomIn=function(e,t){console.log("zoomIn",e),t.stopPropagation();const n=e.closest(".mermaid-zoom");if(!n)return;const o=n.id||Array.from(panzoomInstances.keys()).find(e=>panzoomInstances.get(e).container===n);if(!o||!panzoomInstances.has(o))return;const{instance:i}=panzoomInstances.get(o),a=i.getTransform(),s=n.getBoundingClientRect(),r=s.left+s.width/2,c=s.top+s.height/2,l=a.scale*1.2;i.zoomTo(r,c,l)},window.zoomOut=function(e,t){t.stopPropagation();const n=e.closest(".mermaid-zoom");if(!n)return;const o=n.id||Array.from(panzoomInstances.keys()).find(e=>panzoomInstances.get(e).container===n);if(!o||!panzoomInstances.has(o))return;const{instance:i}=panzoomInstances.get(o),a=i.getTransform(),s=n.getBoundingClientRect(),r=s.left+s.width/2,c=s.top+s.height/2,l=a.scale*.8;i.zoomTo(r,c,l)},window.resetZoom=function(e,t){t.stopPropagation();const n=e.closest(".mermaid-zoom");if(!n)return;const o=n.id||Array.from(panzoomInstances.keys()).find(e=>panzoomInstances.get(e).container===n);if(!o||!panzoomInstances.has(o))return;const{instance:i,initialScale:a}=panzoomInstances.get(o),s=n.getBoundingClientRect(),r=s.left+s.width/2,c=s.top+s.height/2;i.zoomTo(r,c,a)}