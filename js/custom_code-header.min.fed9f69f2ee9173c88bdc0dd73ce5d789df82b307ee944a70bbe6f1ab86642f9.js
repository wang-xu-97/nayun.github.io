document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".copy-button").forEach(e=>{if(!e.querySelector(".copy-tooltip")){const t=document.createElement("span");t.className="copy-tooltip",t.textContent="✓ 已复制",e.appendChild(t)}e.addEventListener("click",()=>{const s=e.closest(".code-block-wrapper"),o=s.querySelector("pre code"),n=e.querySelector(".copy-tooltip"),i=e.innerHTML,t=document.createElement("textarea");t.value=o.innerText,document.body.appendChild(t),t.select(),e.classList.add("hide-original"),navigator.clipboard.writeText(t.value).then(()=>{n.style.opacity="1",setTimeout(()=>{n.style.opacity="0",e.classList.remove("hide-original")},2e3)}),document.body.removeChild(t)})}),document.addEventListener("click",function(e){if(e.target.closest(".fold-button")){const t=e.target.closest(".fold-button"),s=t.closest(".code-block-wrapper"),n=s?.querySelector(".code-content");if(n){n.classList.toggle("collapsed");const s=t.querySelector("i"),e=t.querySelector("span");n.classList.contains("collapsed")?(s?.classList.replace("fa-chevron-up","fa-chevron-down"),e&&(e.textContent="展开")):(s?.classList.replace("fa-chevron-down","fa-chevron-up"),e&&(e.textContent="折叠"))}}}),document.querySelectorAll(".language-label").forEach(e=>{e.addEventListener("click",()=>{const n=e.closest(".code-block-wrapper"),t=n?.querySelector("pre.chroma");t?t.classList.toggle("collapsed"):console.error("折叠失败: ")})})})