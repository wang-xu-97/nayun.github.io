import re

def normal_non_crit_dice_expectation(d):
    return (1+d)/2

def xmds_non_crit_dice_expectation(d):
    return (d+1)*(4*d-1)/(6*d)

nncde = normal_non_crit_dice_expectation
xncde = xmds_non_crit_dice_expectation

def text_to_markdown_table(data_text):
    """
    将文本数据转换为Markdown表格
    
    参数:
    data_text: 包含表格数据的字符串
    
    返回:
    markdown_table: Markdown格式的表格字符串
    """
    
    # 分割文本行
    lines = data_text.strip().split('\n')
    
    # 提取表头（第一行）
    header_line = lines[0]
    # 使用正则表达式分割表头，匹配连续的非空白字符
    headers = re.findall(r'\S+', header_line)
    
    # 处理数据行
    data_rows = []
    for line in lines[2:]:  # 跳过表头和分隔线
        # 使用正则表达式分割数据行
        row_data = re.findall(r'\S+', line)
        if row_data:  # 确保不是空行
            data_rows.append(row_data)
    
    # 构建Markdown表格
    markdown_lines = []
    
    # 添加表头
    header_row = "| | " + " | ".join(headers[1:]) + " |"
    markdown_lines.append(header_row)
    
    # 添加分隔线
    separator_row = "|" + "|".join(["---" for _ in headers]) + "|"
    markdown_lines.append(separator_row)
    
    # 添加数据行
    for row in data_rows:
        data_row = "| " + " | ".join(row) + " |"
        markdown_lines.append(data_row)
    
    # 返回完整的Markdown表格
    return "\n".join(markdown_lines)

if __name__ == '__main__':
    s = '''
击减值\护甲                 5                 6                 7                 8                 9                10                11                12                13                14                15
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
          0      6.6%(15.2->16.1)    3.5%(14.2->14.8)    0.0%(13.3->13.4)   -4.0%(12.4->11.9)   -8.7%(11.6->10.6)  -14.1%(10.7->9.2)  -20.5%(9.8->7.8)  -28.2%(8.8->6.3)  -37.7%(8.0->5.0)  -49.6%(7.0->3.5)  -65.0%(6.2->2.1)
          1      6.3%(15.9->16.9)    3.3%(15.0->15.5)    0.0%(14.1->14.1)   -3.8%(13.2->12.7)   -8.1%(12.3->11.3)  -13.2%(11.4->9.9)  -19.0%(10.5->8.5)  -26.0%(9.6->7.1)  -34.5%(8.7->5.7)  -44.9%(7.8->4.3)  -37.7%(6.9->4.3)
          2      6.0%(16.6->17.6)    3.2%(15.8->16.2)    0.0%(14.8->14.9)   -3.6%(13.9->13.4)   -7.7%(13.1->12.1)  -12.3%(12.2->10.7)  -17.8%(11.2->9.2)  -24.2%(10.3->7.8)  -31.7%(9.4->6.5)  -24.6%(8.6->6.5)  -15.7%(7.7->6.5)
          3      5.7%(17.4->18.4)    3.0%(16.5->17.0)    0.0%(15.6->15.6)   -3.4%(14.7->14.2)   -7.2%(13.8->12.8)  -11.6%(12.9->11.4)  -16.7%(12.0->10.0)  -22.5%(11.1->8.6)  -15.7%(10.2->8.6)   -7.5%(9.3->8.6)    2.4%(8.4->8.6)
          4      5.5%(18.1->19.1)    2.9%(17.2->17.8)    0.0%(16.4->16.4)   -3.2%(15.4->14.9)   -6.9%(14.6->13.6)  -11.0%(13.7->12.2)  -15.7%(12.8->10.8)   -9.3%(11.8->10.8)   -1.8%(10.9->10.8)    7.0%(10.1->10.8)   17.5%(9.2->10.8)
          5      5.3%(18.9->19.9)    2.8%(18.0->18.5)    0.0%(17.1->17.1)   -3.1%(16.2->15.7)   -6.5%(15.3->14.3)  -10.4%(14.4->12.9)   -4.4%(13.5->12.9)    2.4%(12.6->12.9)   10.3%(11.7->12.9)   19.4%(10.8->12.9)   30.3%(9.9->12.9)   
          
'''
    print(text_to_markdown_table(s))